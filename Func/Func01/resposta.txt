CREATE OR REPLACE FUNCTION GET_INGRESSO(SESSAO INTEGER)
RETURNS INTEGER AS 
$$
DECLARE
	NUM_INGRESSOS INTEGER;
BEGIN
	SELECT INTO NUM_INGRESSOS COUNT(S.total_ingressos) FROM SESSAO S
	JOIN RESERVA R ON S.cod_sessao = R.cod_sessao
	JOIN PEDIDO P ON P.cod_pedido = R.cod_pedido
	WHERE S.cod_sessao = SESSAO;
	RETURN NUM_INGRESSOS;
END;
$$
LANGUAGE PLPGSQL;