Função 04

OBS: Essa função retorna o número de cadeiras com base no nome do espetaculo

CREATE OR REPLACE FUNCTION NUMERO_DE_RESERVAS(NOME_DO_ESPETACULO VARCHAR)
RETURNS INTEGER AS
$$
DECLARE
	N_RESERVA INTEGER;
BEGIN
	SELECT COUNT(*) FROM RESERVA AS R
	JOIN ESPETACULO AS E ON R.COD_ESPETACULO = E.COD_ESPETACULO 
	WHERE E.NOME = NOME_DO_ESPETACULO INTO N_RESERVA;
	RETURN N_RESERVA;
END;
$$
LANGUAGE PLPGSQL;

SELECT NUMERO_DE_RESERVAS('Cisne Negro')