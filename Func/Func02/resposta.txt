CREATE OR REPLACE FUNCTION GET_CADEIRAS(CODIGO_CLIENTE INTEGER)
RETURNS INTEGER AS
$$
BEGIN
	SELECT COUNT(CADEIRA) FROM RESERVA AS R
	JOIN PEDIDO AS P ON R.COD_PEDIDO = P.COD_PEDIDO 
	JOIN ESPETACULO AS E ON R.COD_ESPETACULO = E.COD_ESPETACULO
	JOIN SESSAO AS S ON R.COD_SESSAO = S.COD_SESSAO 
	JOIN CLIENTE AS C ON P.COD_CLIENTE = C.COD_CLIENTE 
	WHERE C.COD_CLIENTE = CODIGO_CLIENTE;
END;
$$
LANGUAGE PLPGSQL;